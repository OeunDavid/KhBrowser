<Page x:Class="ToolKHBrowser.Views.pgNewAccount"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:numeric="http://gu.se/NumericInput"
       Width="1195"
      Height="550"
      Title="pgNewAccount">
    <StackPanel Background="#121212">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="569*"></ColumnDefinition>
                <ColumnDefinition Width="626*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Row 0: Top Bar with Store and Main Actions -->
            <Grid Grid.Row="0" Margin="10,5,10,5" Grid.ColumnSpan="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="150"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="150"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Text="Store:" VerticalAlignment="Center" Margin="5,0" Foreground="White"/>
                <ComboBox Grid.Column="1" x:Name="ddlStore" SelectedValuePath="Id" DisplayMemberPath="Name" Margin="5,0" Foreground="White"/>

                <TextBlock Grid.Column="2" Text="Format:" VerticalAlignment="Center" Margin="15,0,5,0" Foreground="White"/>
                <ComboBox Grid.Column="3" x:Name="ddlFormat" Margin="5,0" SelectionChanged="ddlFormat_SelectionChanged" Foreground="White">
                    <ComboBoxItem Content="UID|Password" IsSelected="True"/>
                    <ComboBoxItem Content="UID|Password|2FA"/>
                    <ComboBoxItem Content="UID|Password|Cookie"/>
                    <ComboBoxItem Content="UID|Password|2FA|Cookie"/>
                    <ComboBoxItem Content="UID|Password|Mail|PassMail"/>
                    <ComboBoxItem Content="UID|Password|2FA|Mail|PassMail"/>
                    <ComboBoxItem Content="UID|Password|Cookie|Mail|PassMail"/>
                    <ComboBoxItem Content="UID|Password|2FA|Cookie|Mail|PassMail"/>
                </ComboBox>

                <Button Grid.Column="4" x:Name="btnSaveAccount" Content="Save Account" Background="DeepSkyBlue" Margin="10,0" Click="btnStartSaveAccount_Click"/>

                <StackPanel Grid.Column="6" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="No Update (Exist)" Foreground="White" VerticalAlignment="Center" Margin="5,0"/>
                    <ToggleButton x:Name="chbNoNeedUpdateExistData" Style="{DynamicResource MaterialDesignSwitchToggleButton}" Height="15"/>
                </StackPanel>
            </Grid>

            <!-- Row 1: Manual Input Fields and Row Actions -->
            <StackPanel Grid.Row="1" Margin="10,5,10,5" Background="#1E1E1E" Grid.ColumnSpan="2">
                <WrapPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="5">
                    <StackPanel x:Name="pnlUID" Margin="5,2">
                        <TextBlock Text="UID" FontSize="11" Foreground="#AAA"/>
                        <TextBox x:Name="txtUID" Width="130" Background="#2D2D2D" Foreground="White" BorderThickness="0" Padding="3"/>
                    </StackPanel>
                    <StackPanel x:Name="pnlPassword" Margin="5,2">
                        <TextBlock Text="Password" FontSize="11" Foreground="#AAA"/>
                        <TextBox x:Name="txtPassword" Width="100" Background="#2D2D2D" Foreground="White" BorderThickness="0" Padding="3"/>
                    </StackPanel>
                    <StackPanel x:Name="pnl2FA" Margin="5,2" Visibility="Collapsed">
                        <TextBlock Text="2FA" FontSize="11" Foreground="#AAA"/>
                        <TextBox x:Name="txt2FA" Width="150" Background="#2D2D2D" Foreground="White" BorderThickness="0" Padding="3"/>
                    </StackPanel>
                    <StackPanel x:Name="pnlCookie" Margin="5,2" Visibility="Collapsed">
                        <TextBlock Text="Cookie" FontSize="11" Foreground="#AAA"/>
                        <TextBox x:Name="txtCookie" Width="150" Background="#2D2D2D" Foreground="White" BorderThickness="0" Padding="3"/>
                    </StackPanel>
                    <StackPanel x:Name="pnlMail" Margin="5,2" Visibility="Collapsed">
                        <TextBlock Text="Mail" FontSize="11" Foreground="#AAA"/>
                        <TextBox x:Name="txtMail" Width="130" Background="#2D2D2D" Foreground="White" BorderThickness="0" Padding="3"/>
                    </StackPanel>
                    <StackPanel x:Name="pnlPassMail" Margin="5,2" Visibility="Collapsed">
                        <TextBlock Text="PassMail" FontSize="11" Foreground="#AAA"/>
                        <TextBox x:Name="txtPassMail" Width="100" Background="#2D2D2D" Foreground="White" BorderThickness="0" Padding="3"/>
                    </StackPanel>

                    <Button x:Name="btnAddManual" Content="Add" Background="#4CAF50" BorderThickness="0" Height="25" Margin="10,12,5,0" Padding="10,0" Click="btnAddManual_Click"/>
                    <Button x:Name="btnPasteClipboard" Content="Paste Clipboard" Background="#607D8B" BorderThickness="0" Height="25" Margin="5,12,0,0" Padding="10,0" Click="btnPasteClipboard_Click" ToolTip="Bulk add from clipboard using selected format"/>
                    <Button x:Name="btnClearGrid" Content="Clear All" Background="#F44336" BorderThickness="0" Height="25" Margin="5,12,0,0" Padding="10,0" Click="btnClearGrid_Click"/>
                </WrapPanel>
            </StackPanel>

            <!-- Row 2: DataGrid List -->
            <DataGrid x:Name="gdNewAccount" Grid.Row="2"
                    CanUserAddRows="False" 
                    Margin="0,5,0,0" 
                    MinHeight="350"
                    AutoGenerateColumns="False" 
                    HeadersVisibility="All"
                    SelectionMode="Extended"
                    IsReadOnly="False"
                    Background="#121212"
                    RowBackground="#1E1E1E"
                    Foreground="White"
                    BorderThickness="0" Grid.ColumnSpan="2"
            >
                <DataGrid.Columns>
                    <DataGridTextColumn Width="Auto" Header="No" Binding="{Binding Key}" IsReadOnly="True" />
                    <DataGridTextColumn Width="150" Header="UID" Binding="{Binding UID}"/>
                    <DataGridTextColumn Width="120" Header="Password" Binding="{Binding Password}"/>
                    <DataGridTextColumn Width="150" Header="2FA" Binding="{Binding TwoFA}"/>
                    <DataGridTextColumn Width="200" Header="Cookie" Binding="{Binding Cookie}"/>
                    <DataGridTextColumn Width="Auto" Header="Mail" Binding="{Binding MailPass}"/>
                    <DataGridTemplateColumn Width="70">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="Del" Background="#e74c3c" Height="20" Padding="5,0" FontSize="10" Click="btnDeleteRow_Click"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Grid>
    </StackPanel>
</Page>
